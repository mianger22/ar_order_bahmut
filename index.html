<html>
  <head>
    <script src="ar_libraries/aframe-master/dist/aframe-v1.6.0.min.js"></script>
    <script src="ar_libraries/AR.js-3.4.0/aframe/build/aframe-ar.js"></script>  </head>
  <body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs='sourceType: webcam'>

      <!-- Группа моделей -->
      <a-entity id="modelGallery" rotation="0 0 0">
        <!-- Модели, расположенные по окружности или в линию -->
        <a-entity id="model" gltf-model="#model1" position="0.5 0 -3" scale="0.5 0.5 0.5" rotation="0 0 0"></a-entity>
        <a-entity gltf-model="#model2" position="0 0 -4" scale="0.5 0.5 0.5"></a-entity>
        <a-entity gltf-model="#model3" position="-0.5 0 -3" scale="0.5 0.5 0.5"></a-entity>
        <!-- Можно добавить больше моделей, расположенных по кругу -->
      </a-entity>

      <!-- Камера -->
      <a-entity camera></a-entity>

      <!-- Пути к моделям, укажите свои файлы -->
      <a-assets>
        <a-asset-item id="model1" src="./models/kazakh_dombra.glb"></a-asset-item>
        <a-asset-item id="model2" src="./models/kazakh_dombra.glb"></a-asset-item>
        <a-asset-item id="model3" src="./models/kazakh_dombra.glb"></a-asset-item>
      </a-assets>

      <script>
        // Скрипт для вращения галереи моделей мышью
        let isDragging = false;
        let previousMouseX = 0;
        const gallery = document.querySelector('#modelGallery');

        document.addEventListener('mousedown', (e) => {
          isDragging = true;
          previousMouseX = e.clientX;
        });
        document.addEventListener('mouseup', () => {
          isDragging = false;
        });
        document.addEventListener('mousemove', (e) => {
          if (isDragging) {
            const deltaX = e.clientX - previousMouseX;
            const rotationY = gallery.getAttribute('rotation').y;
            gallery.setAttribute('rotation', {
              x: 0,
              y: rotationY + deltaX * 0.1,
              z: 0
            });
            previousMouseX = e.clientX;
          }
        });

        // Для мобильных устройств
        document.addEventListener('touchstart', (e) => {
          if (e.touches.length === 1) {
            isDragging = true;
            previousMouseX = e.touches[0].clientX;
          }
        });
        document.addEventListener('touchend', () => {
          isDragging = false;
        });
        document.addEventListener('touchmove', (e) => {
          if (isDragging && e.touches.length === 1) {
            const deltaX = e.touches[0].clientX - previousMouseX;
            const rotationY = gallery.getAttribute('rotation').y;
            gallery.setAttribute('rotation', {
              x: 0,
              y: rotationY + deltaX * 0.1,
              z: 0
            });
            previousMouseX = e.touches[0].clientX;
          }
        });
      
      
      // Часть 2 - вращение моделей
  
      const model = document.getElementById('model');
      let dragging = false;
      let lastX = 0, lastY = 0;

      document.addEventListener('mousedown', start);
      document.addEventListener('touchstart', start);
      window.addEventListener('mouseup', end);
      window.addEventListener('touchend', end);
      window.addEventListener('mousemove', move);
      window.addEventListener('touchmove', move);

      function start(e) {
        dragging = true;
        lastX = e.type.startsWith('touch') ? e.touches[0].clientX : e.clientX;
        lastY = e.type.startsWith('touch') ? e.touches[0].clientY : e.clientY;
      }

      function end() {
        dragging = false;
      }

      function move(e) {
        if (!dragging) return;
        const x = e.type.startsWith('touch') ? e.touches[0].clientX : e.clientX;
        const y = e.type.startsWith('touch') ? e.touches[0].clientY : e.clientY;
        const deltaX = x - lastX;
        const deltaY = y - lastY;
        lastX = x;
        lastY = y;

        const rotation = model.getAttribute('rotation');
        // Вращаем по горизонтали и вертикали
        rotation.y += deltaX * 0.3;
        rotation.x += deltaY * 0.3;
        // Ограничение по вертикали
        rotation.x = Math.max(-90, Math.min(90, rotation.x));

        model.setAttribute('rotation', rotation);
    }
    
      
      
      
      
      </script>
    </a-scene>
  </body>